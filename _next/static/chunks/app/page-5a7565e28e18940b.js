(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{57:(e,r,a)=>{Promise.resolve().then(a.bind(a,7714))},7714:(e,r,a)=>{"use strict";a.d(r,{default:()=>s});var t=a(5155),l=a(2115);function s(){let[e,r]=(0,l.useState)([]),[a,s]=(0,l.useState)(""),[d,o]=(0,l.useState)("ERNIE-Lite-8K"),[n,i]=(0,l.useState)(!1),c=(0,l.useRef)(null);(0,l.useEffect)(()=>{var e;null===(e=c.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[e,n]);let u=async e=>{if(e.preventDefault(),!a.trim()||n)return;let t={role:"user",content:a};r(e=>[...e,t]),s(""),i(!0);try{let e=await fetch("https://ninokin.top/gpt/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:a,model:d})}),t=await e.json();if(t.result)r(e=>[...e,{role:"assistant",content:t.result}]);else throw Error("无效的响应")}catch(e){console.error("API 请求错误:",e),r(e=>[...e,{role:"assistant",content:"抱歉，发生了错误，请稍后重试。"}])}finally{i(!1)}};return(0,t.jsxs)("div",{className:"flex flex-col h-[calc(100vh-2rem)] p-4",children:[(0,t.jsx)("div",{className:"mb-4 flex-shrink-0",children:(0,t.jsxs)("select",{value:d,onChange:e=>o(e.target.value),className:"border dark:border-gray-700 rounded p-2 bg-white dark:bg-dark text-gray-900 dark:text-gray-200",children:[(0,t.jsx)("option",{value:"ERNIE-Lite-8K",children:"ERNIE-Lite-8K"}),(0,t.jsx)("option",{value:"ERNIE-Speed-128K",children:"ERNIE-Speed-128K"}),(0,t.jsx)("option",{value:"ERNIE-Tiny-8K",children:"ERNIE-Tiny-8K"}),(0,t.jsx)("option",{value:"gpt-3.5-turbo",children:"gpt-3.5-turbo"})]})}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto border dark:border-gray-700 rounded-lg p-4 mb-4 bg-white dark:bg-dark",children:(0,t.jsxs)("div",{className:"flex flex-col space-y-4",children:[e.map((e,r)=>(0,t.jsx)("div",{className:"flex w-full mb-4",children:(0,t.jsx)("div",{className:"p-3 rounded-lg break-words ".concat("user"===e.role?"bg-blue-100 dark:bg-blue-900/30 ml-auto text-gray-900 dark:text-gray-200":"bg-gray-100 dark:bg-gray-800 mr-auto text-gray-900 dark:text-gray-200"," max-w-[80%]"),children:e.content})},r)),n&&(0,t.jsx)("div",{className:"flex w-full",children:(0,t.jsx)("div",{className:"bg-gray-100 dark:bg-gray-800 p-3 rounded-lg mr-auto text-gray-900 dark:text-gray-200",children:"正在思考..."})}),(0,t.jsx)("div",{ref:c})]})}),(0,t.jsxs)("form",{onSubmit:u,className:"flex gap-2 flex-shrink-0",children:[(0,t.jsx)("textarea",{value:a,onChange:e=>s(e.target.value),onKeyDown:e=>"Enter"===e.key&&!e.shiftKey&&u(e),disabled:n,className:"flex-1 border dark:border-gray-700 rounded-lg p-2 bg-white dark:bg-dark text-gray-900 dark:text-gray-200 resize-none min-h-[60px] disabled:opacity-50",placeholder:n?"等待回复中...":"输入消息... (Shift + Enter 换行)",rows:2}),(0,t.jsx)("button",{type:"submit",disabled:n,className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 dark:bg-blue-600 dark:hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"发送"})]})]})}}},e=>{var r=r=>e(e.s=r);e.O(0,[441,517,358],()=>r(57)),_N_E=e.O()}]);